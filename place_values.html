<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Place Value Master | Interactive Learning Game</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link rel="stylesheet" href="./place_values.css">

  
</head>
<body>
  <div class="game-container">
    <div class="game-header">
      <h1><i class="fas fa-abacus"></i> Place Value Master</h1>
      <p>Identify the place value of the highlighted digit</p>
    </div>
    
    <div class="game-body">
      <div class="difficulty-selector">
        <button class="difficulty-btn active" data-level="easy">Easy</button>
        <button class="difficulty-btn" data-level="medium">Medium</button>
        <button class="difficulty-btn" data-level="hard">Hard</button>
      </div>
      
      <div class="stats-container">
        <div class="stat-box">
          <div class="stat-value" id="score">0</div>
          <div class="stat-label">Score</div>
        </div>
        <div class="stat-box">
          <div class="stat-value" id="time">60</div>
          <div class="stat-label">Seconds Left</div>
        </div>
        <div class="stat-box">
          <div class="stat-value" id="streak">0</div>
          <div class="stat-label">Current Streak</div>
        </div>
      </div>
      
      <div class="progress-bar">
        <div class="progress" id="progress"></div>
      </div>
      
      <div class="number-display">
        <h3 id="flipping-number">0.000</h3>
      </div>
      
      <div class="prompt" id="prompt">
        Select the correct place value for the highlighted digit
      </div>
      
      <div class="options-container" id="optionsContainer">
        <!-- Options will be generated here -->
      </div>
      
      <div class="feedback" id="feedback"></div>
      
      <div class="controls">
        <button class="btn btn-secondary" id="hintBtn">
          <i class="fas fa-lightbulb"></i> Hint
        </button>
        <button class="btn btn-primary" id="flipBtn">
          <i class="fas fa-sync-alt"></i> Flip Number
        </button>
      </div>
    </div>
  </div>
  
  <div class="game-over" id="gameOver">
    <div class="game-over-content">
      <h2 id="gameOverTitle">Game Over!</h2>
      <p id="gameOverMessage">You scored <span id="finalScore">0</span> points!</p>
      <button class="btn btn-primary" id="restartBtn">
        <i class="fas fa-redo"></i> Play Again
      </button>
    </div>
  </div>

  <script>
    // Game variables
    let randomNumber, randomDigitIndex, score = 0, timeLeft = 60, streak = 0;
    let timer;
    let difficulty = 'easy';
    let gameActive = true;
    
    // DOM elements
    const scoreElement = document.getElementById('score');
    const timeElement = document.getElementById('time');
    const streakElement = document.getElementById('streak');
    const progressElement = document.getElementById('progress');
    const numberDisplay = document.getElementById('flipping-number');
    const promptElement = document.getElementById('prompt');
    const optionsContainer = document.getElementById('optionsContainer');
    const feedbackElement = document.getElementById('feedback');
    const flipBtn = document.getElementById('flipBtn');
    const hintBtn = document.getElementById('hintBtn');
    const gameOverElement = document.getElementById('gameOver');
    const gameOverTitle = document.getElementById('gameOverTitle');
    const gameOverMessage = document.getElementById('gameOverMessage');
    const finalScoreElement = document.getElementById('finalScore');
    const restartBtn = document.getElementById('restartBtn');
    const difficultyBtns = document.querySelectorAll('.difficulty-btn');
    
    // Place value options
    const placeValues = [
      'decimal point', 'tenth', 'hundredth', 'thousandth', 
      'ones', 'tens', 'hundreds', 'thousands', 'ten-thousands', 
      'hundred-thousands', 'millions', 'ten-millions'
    ];
    
    // Initialize the game
    function initGame() {
      score = 0;
      timeLeft = 60;
      streak = 0;
      gameActive = true;
      scoreElement.textContent = score;
      timeElement.textContent = timeLeft;
      streakElement.textContent = streak;
      progressElement.style.width = '0%';
      feedbackElement.textContent = '';
      gameOverElement.classList.remove('active');
      
      clearInterval(timer);
      startTimer();
      generateNumber();
    }
    
    // Start the timer
    function startTimer() {
      timer = setInterval(() => {
        if (!gameActive) return;
        
        timeLeft--;
        timeElement.textContent = timeLeft;
        progressElement.style.width = `${(60 - timeLeft) / 60 * 100}%`;
        
        if (timeLeft <= 0) {
          endGame(false);
        }
      }, 1000);
    }
    
    // Generate a random number based on difficulty
    function generateRandomNumber() {
      let wholeDigits, decimalDigits;
      
      switch(difficulty) {
        case 'easy':
          wholeDigits = Math.floor(Math.random() * 1000); // Up to thousands
          decimalDigits = Math.floor(Math.random() * 100); // Up to hundredths
          break;
        case 'medium':
          wholeDigits = Math.floor(Math.random() * 100000); // Up to hundred-thousands
          decimalDigits = Math.floor(Math.random() * 1000); // Up to thousandths
          break;
        case 'hard':
          wholeDigits = Math.floor(Math.random() * 10000000); // Up to ten-millions
          decimalDigits = Math.floor(Math.random() * 1000); // Up to thousandths
          break;
        default:
          wholeDigits = Math.floor(Math.random() * 1000);
          decimalDigits = Math.floor(Math.random() * 100);
      }
      
      return `${wholeDigits}.${decimalDigits.toString().padStart(3, '0')}`;
    }
    
    // Generate and display a new number
    function generateNumber() {
      randomNumber = generateRandomNumber();
      
      // Ensure we don't select the decimal point
      do {
        randomDigitIndex = Math.floor(Math.random() * randomNumber.length);
      } while (randomNumber[randomDigitIndex] === '.');
      
      const numberWithHighlight = highlightDigit(randomNumber, randomDigitIndex);
      numberDisplay.innerHTML = numberWithHighlight;
      
      generateOptions();
      feedbackElement.textContent = '';
      feedbackElement.className = 'feedback';
    }
    
    // Highlight the selected digit
    function highlightDigit(number, index) {
      return number.substring(0, index) + 
             '<span class="highlight">' + number.charAt(index) + '</span>' + 
             number.substring(index + 1);
    }
    
    // Generate answer options
    function generateOptions() {
      optionsContainer.innerHTML = '';
      const correctPlaceValue = getCorrectPlaceValue(randomNumber, randomDigitIndex);
      
      // Create an array of options including the correct one
      const correctIndex = placeValues.indexOf(correctPlaceValue);
      let optionIndices = [correctIndex];
      
      // Add nearby options based on difficulty
      let range;
      switch(difficulty) {
        case 'easy': range = 2; break;
        case 'medium': range = 3; break;
        case 'hard': range = 4; break;
        default: range = 2;
      }
      
      // Add options before and after the correct answer
      for (let i = 1; i <= range; i++) {
        if (correctIndex - i >= 0) optionIndices.push(correctIndex - i);
        if (correctIndex + i < placeValues.length) optionIndices.push(correctIndex + i);
      }
      
      // Shuffle the options
      optionIndices = shuffleArray(optionIndices);
      
      // Create buttons for each option
      optionIndices.forEach(index => {
        const option = placeValues[index];
        const button = document.createElement('button');
        button.className = 'option-btn';
        button.textContent = option;
        button.onclick = () => checkAnswer(option, correctPlaceValue, button);
        optionsContainer.appendChild(button);
      });
    }
    
    // Shuffle an array
    function shuffleArray(array) {
      for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
      }
      return array;
    }
    
    // Determine the correct place value
    function getCorrectPlaceValue(number, index) {
      const decimalIndex = number.indexOf('.');
      
      if (index === decimalIndex) return 'decimal point';
      
      if (index < decimalIndex) {
        // Whole number part
        const positionFromRight = decimalIndex - index - 1;
        
        switch(positionFromRight) {
          case 0: return 'ones';
          case 1: return 'tens';
          case 2: return 'hundreds';
          case 3: return 'thousands';
          case 4: return 'ten-thousands';
          case 5: return 'hundred-thousands';
          case 6: return 'millions';
          case 7: return 'ten-millions';
          default: return 'ones';
        }
      } else {
        // Decimal part
        const positionFromDecimal = index - decimalIndex - 1;
        
        switch(positionFromDecimal) {
          case 0: return 'tenth';
          case 1: return 'hundredth';
          case 2: return 'thousandth';
          default: return 'tenth';
        }
      }
    }
    
    // Check the selected answer
    function checkAnswer(selected, correct, button) {
      if (!gameActive) return;
      
      // Disable all buttons
      const allButtons = optionsContainer.querySelectorAll('.option-btn');
      allButtons.forEach(btn => {
        btn.style.pointerEvents = 'none';
      });
      
      if (selected === correct) {
        // Correct answer
        score += 10;
        streak++;
        scoreElement.textContent = score;
        streakElement.textContent = streak;
        
        button.classList.add('correct');
        feedbackElement.textContent = 'Correct! +10 points';
        feedbackElement.className = 'feedback correct';
        
        // Bonus for streaks
        if (streak % 5 === 0) {
          score += 5;
          scoreElement.textContent = score;
          feedbackElement.textContent = `Correct! +10 points +5 streak bonus!`;
        }
        
        setTimeout(generateNumber, 500);
      } else {
        // Incorrect answer
        streak = 0;
        streakElement.textContent = streak;
        
        button.classList.add('incorrect');
        feedbackElement.textContent = `Incorrect! The correct answer is ${correct}`;
        feedbackElement.className = 'feedback incorrect';
        
        // Highlight the correct answer
        allButtons.forEach(btn => {
          if (btn.textContent === correct) {
            btn.classList.add('correct');
          }
        });
        
        setTimeout(generateNumber, 500);
      }
    }
    
    // End the game
    function endGame(isWin) {
      gameActive = false;
      clearInterval(timer);
      
      gameOverTitle.textContent = isWin ? 'Congratulations!' : 'Time\'s Up!';
      gameOverMessage.textContent = isWin 
        ? `You reached the target score with ${timeLeft} seconds left!` 
        : `You scored ${score} points!`;
      finalScoreElement.textContent = score;
      
      gameOverElement.classList.add('active');
    }
    
    // Provide a hint
    function provideHint() {
      if (!gameActive) return;
      
      const correctPlaceValue = getCorrectPlaceValue(randomNumber, randomDigitIndex);
      const correctIndex = placeValues.indexOf(correctPlaceValue);
      
      // Highlight options close to the correct answer
      const allButtons = optionsContainer.querySelectorAll('.option-btn');
      allButtons.forEach((button, index) => {
        const buttonValue = button.textContent;
        const buttonIndex = placeValues.indexOf(buttonValue);
        
        if (Math.abs(buttonIndex - correctIndex) <= 1) {
          button.style.borderColor = 'var(--warning)';
          button.style.backgroundColor = '#fff3cd';
        }
      });
      
      // Disable hint button for 10 seconds
      hintBtn.disabled = true;
      hintBtn.innerHTML = '<i class="fas fa-clock"></i> Hint Used';
      setTimeout(() => {
        hintBtn.disabled = false;
        hintBtn.innerHTML = '<i class="fas fa-lightbulb"></i> Hint';
      }, 10000);
    }
    
    // Event listeners
    flipBtn.addEventListener('click', generateNumber);
    hintBtn.addEventListener('click', provideHint);
    restartBtn.addEventListener('click', initGame);
    
    // Difficulty selector
    difficultyBtns.forEach(btn => {
      btn.addEventListener('click', () => {
        difficultyBtns.forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
        difficulty = btn.dataset.level;
        initGame();
      });
    });
    
    // Initialize the game when page loads
    window.addEventListener('load', initGame);
  </script>
</body>
</html>